---
title: "graphql-eslintã‚’å°å…¥ã—ã¦GraphQLã‚’Lintã™ã‚‹ with Flat Config"
emoji: "ğŸ‘"
type: "tech" # tech: æŠ€è¡“è¨˜äº‹ / idea: ã‚¢ã‚¤ãƒ‡ã‚¢
topics: ["graphql", "eslint", "typescript"]
published: true
publication_name: "buyselltech"
---

æœ€è¿‘ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ã§GraphQLã®Lintã‚’è¡Œã†ãŸã‚ã«graphql-eslintã‚’å°å…¥ã—ãŸã®ã§ã™ãŒã€ç›´è¿‘ã§Flat Configã«ç§»è¡Œã—ãŸã“ã¨ã‚‚ã‚ã‚Šã€ã„ãã¤ã‹è©°ã¾ã‚‹ç®‡æ‰€ãŒã‚ã£ãŸã®ã§å°å…¥æ–¹æ³•ã‚’ç´¹ä»‹ã—ãŸã„ã¨æ€ã„ã¾ã™ã€‚

# graphql-eslintã¨ã¯

graphql-eslintã¨ã¯[The Guild](https://the-guild.dev/)ã«ã‚ˆã£ã¦å…¬é–‹ã•ã‚Œã¦ã„ã‚‹ESLintã®ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã§ã€GraphQLã®ã‚¹ã‚­ãƒ¼ãƒã‚„ã‚ªãƒšãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã«å¯¾ã—ã¦Lintã‚’å®Ÿè¡Œã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚

https://the-guild.dev/graphql/eslint/docs

# å°å…¥æ–¹æ³•

ç°¡å˜ãªå°å…¥æ–¹æ³•ã¨ã„ãã¤ã‹ã®ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã«ã¤ã„ã¦ç´¹ä»‹ã—ã¾ã™ã€‚

ä¸‹è¨˜ã‚³ãƒãƒ³ãƒ‰ã§ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã‚’è¿½åŠ ã—ã¾ã™ã€‚

```bash
yarn add --dev @graphql-eslint/eslint-plugin
```

æœ€å°ã®æ§‹æˆã®å ´åˆã€è¨­å®šã¯ä¸‹è¨˜ã®ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚

```javascript
const esLintPluginGraphQL = require('@graphql-eslint/eslint-plugin');

module.exports = [
  {
    files: ['src/**/*.graphql'],
    languageOptions: {
      parser: esLintPluginGraphQL,
    },
    plugins: {
      '@graphql-eslint': esLintPluginGraphQL,
    },
    rules: {
      '@graphql-eslint/no-anonymous-operations': 'error',
    },
  },
];
```

## Parser Options

å‹•ã‹ã™ã ã‘ã§ã‚ã‚Œã°ä¸Šè¨˜ã§å•é¡Œãªã„ã§ã™ãŒã€å®Ÿå‹™ã§ä½¿ç”¨ã™ã‚‹å ´åˆã¯`operations-recommended`ãªã©ã®ãƒ«ãƒ¼ãƒ«ã‚»ãƒƒãƒˆã‚’ä½¿ç”¨ã™ã‚‹ã“ã¨ã«ãªã‚‹ã¨æ€ã„ã¾ã™ã€‚ãã®ä¸­ã«ã¯`schema`ã‚„`documents`ãªã©ã®ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã‚’å¿…è¦ã¨ã™ã‚‹ãƒ«ãƒ¼ãƒ«ã‚‚å­˜åœ¨ã™ã‚‹ãŸã‚ã€å¿…è¦ã«å¿œã˜ã¦ã“ã‚Œã‚‰ã®ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã‚’æŒ‡å®šã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚

#### `schema`

GraphQLã‚¹ã‚­ãƒ¼ãƒã®URLã‚„ãƒ•ã‚¡ã‚¤ãƒ«ãƒ‘ã‚¹ã‚’æŒ‡å®šã—ã¾ã™ã€‚
ä¾‹ãˆã°`@graphql-eslint/no-deprecated`ãªã©ã®ãƒ«ãƒ¼ãƒ«ã®å ´åˆã€GraphQLã‚¹ã‚­ãƒ¼ãƒã®æƒ…å ±ãŒå¿…è¦ã«ãªã‚‹ã®ã§ã€ã“ã®ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã‚’æŒ‡å®šã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚

#### `documents`

GraphQLã‚ªãƒšãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ãŒå®šç¾©ã•ã‚Œã¦ã„ã‚‹ãƒ•ã‚¡ã‚¤ãƒ«ã®ãƒ‘ã‚¹ã‚’æŒ‡å®šã—ã¾ã™ã€‚
ESLintã¯1ãƒ•ã‚¡ã‚¤ãƒ«ãšã¤ãƒã‚§ãƒƒã‚¯ã—ã¦è¡Œãã¾ã™ã€‚ã—ã‹ã—ã€Fragmentã‚’ãƒ•ã‚¡ã‚¤ãƒ«ã‚’è·¨ã„ã§ä½¿ç”¨ã—ã¦ã„ã‚‹å ´åˆã€å˜ä¸€ãƒ•ã‚¡ã‚¤ãƒ«ã ã‘ã§ã¯æƒ…å ±ãŒè¶³ã‚Šãšã€ãƒ«ãƒ¼ãƒ«ãŒæ­£ã—ãé©ç”¨ã•ã‚Œãªã„å¯èƒ½æ€§ãŒã‚ã‚Šã¾ã™ã€‚
ã“ã®ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã‚’æŒ‡å®šã™ã‚‹ã“ã¨ã§ã€Lintã™ã‚‹éš›ã«åˆ¥ãƒ•ã‚¡ã‚¤ãƒ«ã®GraphQLã‚ªãƒšãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã‚’å‚ç…§ã§ãã€æ­£ã—ããƒ«ãƒ¼ãƒ«ãŒé©ç”¨ã§ãã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚

ãã®ä»–ã«ã‚‚ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã¯ã‚ã‚Šã¾ã™ãŒã€[å…¬å¼ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ](https://the-guild.dev/graphql/eslint/docs/getting-started/parser-options)ã¯æ›´æ–°ã•ã‚Œã¦ã„ãªã„ã®ã§ã€[å®Ÿè£…](https://github.com/B2o5T/graphql-eslint/blob/master/packages/plugin/src/parser.ts)ã‚’å‚ç…§ã™ã‚‹ã®ãŒè‰¯ã•ãã†ã§ã™ã€‚


ä¸‹è¨˜ã¯ä¸Šè¨˜ã®ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã‚’æŒ‡å®šã—ãŸä¸Šã§ã€`operations-recommended`ã‚’ä½¿ç”¨ã™ã‚‹å ´åˆã®è¨­å®šã§ã™ã€‚

```javascript
const esLintPluginGraphQL = require('@graphql-eslint/eslint-plugin');

module.exports = [
  {
    files: ['src/**/*.graphql'],
    languageOptions: {
      parser: esLintPluginGraphQL,
      parserOptions: {
        schema: './graphql.schema.json',
        documents: ['src/**/*.graphql'],
      },
    },
    plugins: {
      '@graphql-eslint': esLintPluginGraphQL,
    },
    rules: {
      ...esLintPluginGraphQL.flatConfigs['operations-recommended'].rules,
    },
  },
];
```

## ã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰å†…ã§GraphQLã‚ªãƒšãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ãŒå®šç¾©ã•ã‚Œã¦ã„ã‚‹å ´åˆ

GraphQLã‚ªãƒšãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã®å®šç¾©ã‚’`.graphql`ãƒ•ã‚¡ã‚¤ãƒ«ã§ã¯ãªãã€`.ts`ã‚„`.tsx`ãªã©ã®ã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰å†…ã§å®šç¾©ã—ã¦ã‚‹å ´åˆã‚‚ã‚ã‚Šã¾ã™ã€‚ãã®å ´åˆã¯ãã‚Œã‚‰ã®ãƒ•ã‚¡ã‚¤ãƒ«ã«å¯¾ã—ã¦`processor`ã‚’æŒ‡å®šã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚
ã“ã‚Œã«ã‚ˆã‚Šã€ã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰å†…ã§å®šç¾©ã•ã‚ŒãŸGraphQLã®ã‚¹ã‚­ãƒ¼ãƒã‚„ã‚ªãƒšãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã‚’å…ƒã«ã€ä»®æƒ³çš„ãª`.graphql`ãƒ•ã‚¡ã‚¤ãƒ«ãŒç”Ÿæˆã•ã‚Œã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚ã“ã®ç”Ÿæˆã•ã‚ŒãŸä»®æƒ³ãƒ•ã‚¡ã‚¤ãƒ«ã«å¯¾ã—ã¦ã€Lintã‚’å®Ÿè¡Œã™ã‚‹ã“ã¨ã§ã€ã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰å†…ã§å®šç¾©ã•ã‚ŒãŸGraphQLã‚ªãƒšãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã«ã‚‚ãƒ«ãƒ¼ãƒ«ã‚’é©ç”¨ã™ã‚‹ã“ã¨ãŒã§ãã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚

å®Ÿéš›ã®è¨­å®šã¯ä¸‹è¨˜ã®æ§˜ã«ãªã‚Šã¾ã™ã€‚

```javascript
const esLintPluginGraphQL = require('@graphql-eslint/eslint-plugin');
const tsEsLintParser = require('@typescript-eslint/parser');

module.exports = [
  {
    files: ['src/**/*.{ts,tsx}'],
    processor: esLintPluginGraphQL.processors.graphql,
    languageOptions: {
      parser: tsEsLintParser,
    },
  },
  {
    files: ['src/**/*.graphql'],
    languageOptions: {
      parser: esLintPluginGraphQL,
      parserOptions: {
        schema: './graphql.schema.json',
        documents: ['src/**/*.{graphql,ts,tsx}'],
      },
    },
    plugins: {
      '@graphql-eslint': esLintPluginGraphQL,
    },
    rules: {
      ...esLintPluginGraphQL.flatConfigs['operations-recommended'].rules,
    },
  },
];
```

# ã¾ã¨ã‚

å°å…¥ã«å½“ãŸã‚Šã€ãƒ—ãƒ­ã‚»ãƒƒã‚µãƒ¼å‘¨ã‚Šãªã©åœ°å‘³ã«è©°ã¾ã‚‹ç®‡æ‰€ãŒã‚ã£ãŸã®ã§ã€åŒã˜ã‚ˆã†ã«graphql-eslintã®å°å…¥ã‚’æ¤œè¨ã—ã¦ã„ã‚‹æ–¹ã®å‚è€ƒã«ãªã‚Œã°å¹¸ã„ã§ã™ã€‚
ã¾ãŸã€ESLintã®ã‚«ã‚¹ã‚¿ãƒ ãƒ«ãƒ¼ãƒ«ã‚’ä½œæˆã™ã‚‹ãŸã‚ã®æ©Ÿèƒ½ã‚‚æä¾›ã—ã¦ãŠã‚Šã€å®Ÿéš›ã«ä½¿ç”¨ã—ã¦ã‚«ã‚¹ã‚¿ãƒ ãƒ«ãƒ¼ãƒ«ã‚’ä½œæˆã—ã¦ã¿ãŸã®ã§ã€ãã‚Œã«é–¢ã—ã¦ã¯åˆ¥é€”è¨˜äº‹ã«ã—ã‚ˆã†ã¨æ€ã„ã¾ã™ï¼
